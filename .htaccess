
# ----------------------------------------------------------------------
# EDUCFORMA - Correctif Serveur pour Namecheap (Extensions .tsx)
# ----------------------------------------------------------------------

# 1. Forcer le type MIME pour toutes les extensions TypeScript/React
<IfModule mod_mime.c>
    AddType application/javascript .tsx
    AddType application/javascript .ts
    AddType application/javascript .jsx
</IfModule>

# 2. Forcer le traitement des fichiers .tsx comme du JavaScript au niveau du moteur
<FilesMatch "\.tsx$">
    ForceType application/javascript
    # Autoriser l'accès même si le serveur a des règles de sécurité strictes
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
    
    # En-têtes pour éviter les erreurs de type (MIME Sniffing)
    <IfModule mod_headers.c>
        Header set Content-Type "application/javascript"
        Header set X-Content-Type-Options "nosniff"
        Header set Access-Control-Allow-Origin "*"
    </IfModule>
</FilesMatch>

# 3. Empêcher les redirections de fichiers existants (évite les boucles d'erreur)
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule \.(tsx|ts|jsx)$ - [L]
</IfModule>
