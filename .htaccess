
# ----------------------------------------------------------------------
# EDUCFORMA - Correctif de compatibilité totale pour Namecheap
# ----------------------------------------------------------------------

# 1. Empêcher le serveur de bloquer les fichiers .tsx (ModSecurity & Mime)
<IfModule mod_mime.c>
    # On dit au serveur que .tsx est du JavaScript pour qu'il l'autorise
    AddType application/javascript .tsx
    AddType application/javascript .ts
    AddType application/javascript .jsx
</IfModule>

# 2. Forcer le traitement comme fichier statique (évite les erreurs CGI/PHP)
<FilesMatch "\.(tsx|ts)$">
    SetHandler default-handler
    <IfModule mod_headers.c>
        Header set Content-Type "application/javascript"
        Header set Access-Control-Allow-Origin "*"
        Header set X-Content-Type-Options "nosniff"
    </IfModule>
</FilesMatch>

# 3. Désactiver les filtres de sécurité qui bloquent les extensions inconnues
<IfModule mod_security.c>
    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

# 4. Gestion propre des routes
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    # Si le fichier .tsx existe, on le sert directement sans redirection
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule \.(tsx|ts|jsx)$ - [L]
</IfModule>
